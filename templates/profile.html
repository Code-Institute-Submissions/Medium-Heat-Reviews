{% extends "base.html" %}
{% block content %}
   
{% if main_content == "edit_profile" %}
    <div class="container-fluid">
        {% include "edit_profile.html" %}
    </div>

    {% else %}
    <br><br>
    <div class="container well">
        <!--Profile Picture-->
        <div class="row">
            <div class="col-12 image-edit center-align">
                <img src="{{ user.user_image }}" class="img-circle center-align">
                <!-- How do I have a temporary profile picture for newly registered accounts?  -->
            </div>  
        </div>
        <!--Uer Details-->
	    <div class="row">
            <div class="col-12 center-align">
                <h3>{{ user.username }}'s Profile</h3>
                <p>{{ user.tagline }}</p>
            </div>
            <!--Edit Profile-->
            <div class="col-12 center-align">
                <a class="btn" href="{{ url_for('edit_profile', user_profile_id=user._id) }}" title="edit profile"> <i
                    class="fas fa-user-edit" aria-hidden="true"> Edit Profile</i></a>
            </div>
        </div>   
    </div>
    {% endif %}

    <div class="container">
        <!-- My Reviews-->
        <div class="row">
            <div class="col-12 center-align">
                <h3>My Reviews</h3>
            </div>
            <div class="col-12 center-align">
                <a class="btn " href="{{ url_for('add_reviews') }}" title="Add Review"> <i
                    class="fas fa-plus" aria-hidden="true"> Add Review</i></a>
            </div>
        </div>
    </div>
    <!-- Search My Reviews -->
    <div class="row">
        <form action="{{ url_for('search') }}" method="post" class="col s12">
            <div class="row valign-wrapper right-align">
                <div class="input-field col s12 m6">
                    <i class="fas fa-search prefix"></i>
                    <input type="text" name="query" id="query" minlength="3" class="validate" required>
                    <label for="query">Search Reviews</label>
                </div>
                <div class="col s12 m4">
                    <button type="submit" class="btn">
                        <i class="fas fa-search left"></i> Search
                    </button>
                    <a href="{{ url_for('profile') }}" class="btn">Reset</a>   
                </div>
            </div>
        </form>
    </div>
    <!--My Review Cards-->
    <div class="container-fluid">
        <div class="row card-tiles">
        {% for review in review %}
            {% if review.submitted_by == session["user"] %}
            <div class="col-sm-12 col-md-6 col-lg-3">
                <div class="category-header center-align">
                    {{ review.category_name }}   
                </div>
                <div class="card center">
                    <div class="row">
                        <div class="col s12 center-align">
                        <!-- Edit button -->
                        <button type="submit" class="btn">
                            <a href="{{ url_for('edit_review', review_id=review._id) }}">
                                <i class="fas fa-edit center"></i>
                            </a>
                        </button>
                        <!--Delete Button-->
                        <button type="delete" class="btn">
                            <a href="{{ url_for('delete_review', review_id=review._id) }}">
                                <i class="fas fa-trash center"></i>
                            </a>
                        </button>
                    </div>
                </div>
                <!--Image-->
                <div class="card-image">
                    <img class="activator" src="{{ review.img_url }}">
                </div>
                <!--Review Details-->
                <div class="card-content activator">
                    <span class="card-title  grey-text text-darken-4">{{ review.title }}</span>
                        <p class="card-comp"><strong>Release Date: </strong>{{ review.release_date }}</p>
                        <p class="card-comp"><strong>Created by: </strong>{{ review.created_by }}</p>
                        <p class="card-comp"><strong>Genre: </strong>{{ review.genre }}</p>
                        <p class="card-comp"><strong>Length: </strong>{{ review.length }}</p>
                        <p class="card-comp"><strong>Review: </strong>"{{ review.review }}"</p>
                        <p class="card-comp"><strong>Submitted by: </strong>{{ review.submitted_by }}</p>
                    <i class=" fas fa-ellipsis-h"></i>
                </div>
                </div>
            </div>
            {% endif %}
        {% endfor %}
        </div>
    </div>

{% endblock %}